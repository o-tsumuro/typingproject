{% extends "base.html" %}

{% load static %}

{% block title %}index{% endblock  %}

{% block contents %}

    <div id="title">
        タイトル：{{ content_object.title }}
        {% if user.is_authenticated %}
            {% if is_favorite %}
                <form method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="delete_favorite">
                    <input type="submit" value="お気に入り削除">
                </form>
            {% else %}
                <form method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="add_favorite">
                    <input type="submit" value="お気に入り登録">
                </form>
            {% endif %}
        {% else %}
            <input type="submit" value="お気に入り登録" disabled>
        {% endif %}
    </div>

    <div id="target-sentence">{{ content_object.sentence }}</div>
    <button id="start-button">スタート</button>
    <div id="timer">タイム： 00:00</div>
    <textarea id="typing-input" disabled></textarea>

    <form id="typing_form" method="POST">
        {% csrf_token %}
        <input type="hidden" name="action" value="save_history">
        <input type="hidden" id="typing_time" name="typing_time">

        {% if user.is_authenticated %}
            <input type="submit" id="typing_time_submit" value="履歴を保存する">
        {% else %}
            <input type="submit" id="typing_time_submit" value="履歴を保存する" disabled>
        {% endif %}
        
    </form>

    {% for content in content_list %}
        <li><a href="{% url "typingapp:typing" content.pk %}">{{ content.title }}</a></li>
    {% endfor %}

    <script type="module" src="{% static 'js/main.js' %}"></script>

{% endblock  %}